{"mappings":"AAAA,MAAM,eAAe;AACrB,MAAM,YAAY;AAElB,MAAM,gBAAgB;IACpB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,6EAA6E;AAC7E,KAAK,gBAAgB,CAAC,WAAW,CAAA;IAC/B,QAAQ,GAAG,CAAC;IACZ,MAAM,SAAS,CACb,OAAO,IAAI,CAAC,cACT,IAAI,CAAC,CAAA,QAAS,MAAM,MAAM,CAAC,gBAC3B,IAAI,CAAC,IAAM,KAAK,WAAW,IAC3B,KAAK,CAAC,CAAA,MAAO,QAAQ,KAAK,CAAC,gCAAgC;AAElE;AAEA,6EAA6E;AAC7E,KAAK,gBAAgB,CAAC,YAAY,CAAA;IAChC,MAAM,SAAS,CACf,AAAC,CAAA;QACC,MAAM,QAAQ,MAAM,OAAO,IAAI,CAAC;QAChC,KAAK,MAAM,SAAS,cAClB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM,GAAG,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE;YAC7E,MAAM,MAAM,GAAG,CAAC,OAAO,SAAS,KAAK;YACrC,QAAQ,GAAG,CAAC,CAAC,+BAAwB,EAAE,OAAO;QAChD,EAAE,OAAO,KAAK;YACZ,QAAQ,IAAI,CAAC,CAAC,iDAAmC,EAAE,OAAO,EAAE;QAC9D;QAEF,KAAK,WAAW;IAClB,CAAA;AAGF;AAEA,4EAA4E;AAC5E,KAAK,gBAAgB,CAAC,SAAS,CAAA;IAC7B,MAAM,MAAM,IAAI,IAAI,MAAM,OAAO,CAAC,GAAG;IACrC,MAAM,WAAW,IAAI,QAAQ;IAE7B,IAAI,MAAM,OAAO,CAAC,MAAM,KAAK,OAAO;IAEpC,wBAAwB;IACxB,IAAI,cAAc,QAAQ,CAAC,WAAW;QACpC,MAAM,WAAW,CACf,OAAO,KAAK,CAAC,MAAM,OAAO,EAAE,IAAI,CAAC,CAAA,SAC/B,UAAU,MAAM,MAAM,OAAO;QAGjC;IACF;IAEA,uCAAuC;IACvC,IAAI,SAAS,QAAQ,CAAC,UAAU;QAC9B,MAAM,WAAW,CACf,OAAO,IAAI,CAAC,WAAW,IAAI,CAAC,OAAM;YAChC,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,MAAM,OAAO,CAAC,KAAK;gBAChD,IAAI,SAAS,EAAE,EACb,MAAM,GAAG,CAAC,MAAM,OAAO,EAAE,SAAS,KAAK;gBAEzC,OAAO;YACT,EAAE,OAAO,KAAK;gBACZ,QAAQ,IAAI,CAAC,kDAA+C;gBAC5D,MAAM,SAAS,MAAM,MAAM,KAAK,CAAC,MAAM,OAAO;gBAC9C,OAAO,UAAU,IAAI,SAAS,KAAK,SAAS,CAAC;oBAAE,OAAO;gBAAsB,IAAI;oBAC9E,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;gBAChD;YACF;QACF;QAEF;IACF;IAEA,uCAAuC;IACvC,MAAM,WAAW,CACf,OAAO,KAAK,CAAC,MAAM,OAAO,EAAE,IAAI,CAAC,CAAA,SAC/B,UACA,MAAM,MAAM,OAAO,EAAE,KAAK,CAAC,CAAA;YACzB,QAAQ,IAAI,CAAC,+CAA4C;YAEzD,uCAAuC;YACvC,IAAI,MAAM,OAAO,CAAC,WAAW,KAAK,YAChC,OAAO,OAAO,KAAK,CAAC;YAGtB,OAAO,IAAI,SAAS,iCAAiC;gBACnD,QAAQ;gBACR,YAAY;YACd;QACF;AAGN","sources":["sw-static-cache.js"],"sourcesContent":["const STATIC_CACHE = 'static-v1';\nconst API_CACHE = 'fintrack-api-cache';\n\nconst STATIC_ASSETS = [\n  '/index.html',\n  '/manifest.webmanifest',\n  '/pages/home.html',\n  '/pages/profile.html',\n  '/pages/analysis.html',\n  '/pages/settings.html',\n  '/pages/register.html',\n  '/pages/notifications.html',\n  '/pages/transactions.html',\n  '/logoFintonic192x192.c58ee458.png',\n];\n\n// ── Instalar y cachear recursos estáticos ─────────────────────────────────\nself.addEventListener('install', event => {\n  console.log('[SW STATIC] Instalando y cacheando recursos estáticos');\n  event.waitUntil(\n    caches.open(STATIC_CACHE)\n      .then(cache => cache.addAll(STATIC_ASSETS))\n      .then(() => self.skipWaiting())\n      .catch(err => console.error('[SW STATIC] Error cacheando:', err))\n  );\n});\n\n// ── Activar y limpiar caches antiguos ─────────────────────────────────────\nself.addEventListener('activate', event => {\n  event.waitUntil(\n  (async () => {\n    const cache = await caches.open(STATIC_CACHE);\n    for (const asset of STATIC_ASSETS) {\n      try {\n        const response = await fetch(asset);\n        if (!response.ok) throw new Error(`${response.status} ${response.statusText}`);\n        await cache.put(asset, response.clone());\n        console.log(`[SW STATIC] ✅ Cacheado: ${asset}`);\n      } catch (err) {\n        console.warn(`[SW STATIC] ⚠️ No se pudo cachear: ${asset}`, err);\n      }\n    }\n    self.skipWaiting();\n  })()\n);\n\n});\n\n// ── Interceptar peticiones ───────────────────────────────────────────────\nself.addEventListener('fetch', event => {\n  const url = new URL(event.request.url);\n  const pathname = url.pathname;\n\n  if (event.request.method !== 'GET') return;\n\n  // 1. Recursos estáticos\n  if (STATIC_ASSETS.includes(pathname)) {\n    event.respondWith(\n      caches.match(event.request).then(cached =>\n        cached || fetch(event.request)\n      )\n    );\n    return;\n  }\n\n  // 2. Peticiones a API → cache dinámico\n  if (pathname.includes('/api/')) {\n    event.respondWith(\n      caches.open(API_CACHE).then(async cache => {\n        try {\n          const response = await fetch(event.request.clone());\n          if (response.ok) {\n            cache.put(event.request, response.clone());\n          }\n          return response;\n        } catch (err) {\n          console.warn('[SW STATIC] API offline, usando caché para:', pathname);\n          const cached = await cache.match(event.request);\n          return cached || new Response(JSON.stringify({ error: 'Offline y sin caché' }), {\n            status: 503,\n            headers: { 'Content-Type': 'application/json' }\n          });\n        }\n      })\n    );\n    return;\n  }\n\n  // 3. Otros recursos → red con fallback\n  event.respondWith(\n    caches.match(event.request).then(cached =>\n      cached ||\n      fetch(event.request).catch(err => {\n        console.warn('[SW STATIC] Error de red o sin conexión:', err);\n\n        // Fallback a home si es documento HTML\n        if (event.request.destination === 'document') {\n          return caches.match('/pages/home.html');\n        }\n\n        return new Response('Recurso no disponible offline', {\n          status: 503,\n          statusText: 'Offline'\n        });\n      })\n    )\n  );\n});\n"],"names":[],"version":3,"file":"sw-static-cache.js.map","sourceRoot":"/__parcel_source_root/"}